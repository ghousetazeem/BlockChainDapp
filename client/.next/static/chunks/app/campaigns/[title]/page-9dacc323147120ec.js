(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[681],{1523:function(e,l,s){Promise.resolve().then(s.bind(s,6150))},6150:function(e,l,s){"use strict";s.r(l);var t=s(7437),a=s(6691),n=s.n(a),d=s(3605),i=s(171),r=s(2265),c=s(4033),o=s(3159),u=s(6887),m=s(661),x=s(1674),h=s(9638);l.default=()=>{var e,l,s;let a=(0,c.useRouter)(),{selectedCampaign:p,contract:f}=(0,h.useEthersContext)(),[g,j]=(0,r.useState)(0),[v,N]=(0,r.useState)([]),[b,w]=(0,r.useState)(!1);(0,r.useEffect)(()=>{if(null===p)return a.back();p.donations.sort((e,l)=>l.amount-e.amount);let e=p.donations.slice(0,10);N(e)},[]);let handleSubmit=async e=>{if(e.preventDefault(),0===g)return i.toast.error("Please enter an amount");if(0>=(0,u.Z)(p.deadline))return i.toast.error("Campaign has ended");w(!0);try{await f.donate(p.id,{value:d.fi(g),gasLimit:1e6}),i.toast.success("Donation Successful!")}catch(e){i.toast.error("Donation Failed!")}j(0),w(!1)};return(0,t.jsxs)("main",{children:[(0,t.jsxs)("div",{className:"flex gap-4 md:flex-row flex-col",children:[(0,t.jsx)("div",{className:"w-full h-full max-h-[300px] md:max-h-none md:h-[400px] xl:h-[500px]",children:(0,t.jsx)("img",{className:"rounded-lg w-full object-cover h-full max-h-[300px] md:max-h-none",src:null==p?void 0:p.imageUrl,alt:null==p?void 0:p.title,width:1400,height:800})}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row md:flex-col justify-between gap-4",children:[(0,t.jsxs)("div",{className:"rounded-lg bg-neutral-800 min-w-[124px] w-full",children:[(0,t.jsx)("p",{className:"p-4 text-center text-2xl",children:(0,u.Z)(null==p?void 0:p.deadline)>0?(0,u.Z)(null==p?void 0:p.deadline):"Ended"}),(0,t.jsx)("p",{className:"bg-neutral-700 w-full rounded-b-lg p-2 text-sm text-neutral-400 text-center",children:(0,u.Z)(null==p?void 0:p.deadline)>0?"Days Left":"Status"})]}),(0,t.jsxs)("div",{className:"rounded-lg bg-neutral-800 min-w-[124px] w-full",children:[(0,t.jsx)("p",{className:"p-4 text-center text-2xl",children:null!==(l=null==p?void 0:p.collectedAmount)&&void 0!==l?l:0}),(0,t.jsxs)("p",{className:"bg-neutral-700 w-full rounded-b-lg p-2 text-sm text-neutral-400 text-center",children:["Raised of ",null==p?void 0:p.target]})]}),(0,t.jsxs)("div",{className:"rounded-lg bg-neutral-800 min-w-[124px] w-full",children:[(0,t.jsx)("p",{className:"p-4 text-center text-2xl",children:null!==(s=null==p?void 0:null===(e=p.donations)||void 0===e?void 0:e.length)&&void 0!==s?s:0}),(0,t.jsx)("p",{className:"bg-neutral-700 w-full rounded-b-lg p-2 text-sm text-neutral-400 text-center",children:"Donations"})]})]})]}),(0,t.jsxs)("div",{className:"grid gap-4 ".concat((0,u.Z)(null==p?void 0:p.deadline)>0?"grid-cols-1 md:grid-cols-4":"grid-cols-1"),children:[(0,t.jsxs)("div",{className:"col-span-4 md:col-span-3",children:[(0,t.jsxs)("div",{className:"mt-8",children:[(0,t.jsx)("h4",{className:"text-xl font-semibold uppercase mb-2",children:"Creator"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(n(),{className:"p-3 bg-neutral-800 rounded-full",src:m.default,alt:null==p?void 0:p.owner,width:48,height:48}),(0,t.jsx)("p",{className:"truncate text-neutral-400",children:null==p?void 0:p.owner})]})]}),(0,t.jsxs)("div",{className:"mt-8",children:[(0,t.jsx)("h4",{className:"text-xl font-semibold uppercase mb-2",children:"Story"}),(0,t.jsx)("p",{className:"text-neutral-400",children:null==p?void 0:p.description})]}),(0,t.jsxs)("div",{className:"mt-8",children:[(0,t.jsx)("h4",{className:"text-xl font-semibold uppercase mb-2",children:"Top Donations"}),(0,t.jsx)("div",{className:"flex flex-col gap-4",children:(null==v?void 0:v.length)>0?v.map((e,l)=>(0,t.jsx)("div",{className:"bg-neutral-800 p-4 rounded-lg",children:(0,t.jsxs)("p",{className:"text-neutral-400 flex items-center gap-2",children:[(0,t.jsx)(o.$$w,{className:"text-2xl text-emerald-500"})," ",(0,t.jsxs)("b",{children:[e.amount," ",(0,t.jsx)("span",{className:"hidden md:inline",children:"Eth"})]})," ","from ",(0,t.jsx)("span",{className:"truncate",children:e.donator})]})},l)):(0,t.jsx)("p",{className:"text-neutral-400",children:"No donations yet."})})]})]}),(0,u.Z)(null==p?void 0:p.deadline)>0&&(0,t.jsxs)("div",{className:"col-span-4 md:col-span-1 mt-8",children:[(0,t.jsx)("h4",{className:"text-xl font-semibold uppercase",children:"Fund"}),(0,t.jsxs)("form",{onSubmit:handleSubmit,className:"bg-neutral-800 rounded-lg p-4",children:[(0,t.jsx)(x.yt,{label:"Amount",placeholder:"ETH 0.1",type:"number",value:g,onChange:e=>j(e.target.value)}),(0,t.jsxs)("div",{className:"bg-neutral-900 text-sm rounded-lg p-2 my-4",children:[(0,t.jsx)("p",{children:"Back it because you believe in it."}),(0,t.jsx)("p",{className:"text-neutral-500 text-sm mt-2",children:"Support the project for no reward, just because it speaks to you."})]}),(0,t.jsx)(x.Hd,{type:"submit",onClick:handleSubmit,className:"w-full font-semibold p-2 rounded-lg bg-emerald-500 hover:bg-emerald-600 transition-all duration-200F",loading:b,children:"Fund Campaign"})]})]})]})]})}}},function(e){e.O(0,[465,582,447,929,420,115,982,964,585,840,971,864,744],function(){return e(e.s=1523)}),_N_E=e.O()}]);